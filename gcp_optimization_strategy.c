#include <stdio.h>

int main(void) {
    printf("Чтобы избежать высокой нагрузки на сервер в Google Cloud, нам следует оптимизировать процесс обработки отчетов.\n\n");
    printf("Основная причина высокой нагрузки, скорее всего, заключается в ресурсоемкой операции парсинга XLS-файлов. Каждый раз, когда кэш для отчета устаревает (в данный момент через 1 час), система заново читает и обрабатывает весь XLS-файл, что требует значительных ресурсов процессора и памяти.\n\n");
    printf("Я предлагаю следующий план действий:\n\n");
    printf("1. **Увеличить время кэширования.** Если исходные XLS-файлы в директории 'otch' не обновляются каждый час, мы можем значительно увеличить время жизни кэша. Я предлагаю изменить его с 1 часа (3600 секунд) на 24 часа (86400 секунд). Это кардинально снизит частоту выполнения ресурсоемких операций парсинга.\n\n");
    printf("2. **(Следующий шаг) Создать команду для 'прогрева' кэша.** Вместо того чтобы генерировать кэш при первом запросе пользователя, мы можем создать фоновую задачу (Artisan Command), которая будет запускаться по расписанию (например, раз в сутки ночью) и обновлять кэш для всех отчетов. Это перенесет нагрузку на время, когда на сайте минимальное количество посетителей.\n\n");
    printf("В качестве первого шага я внес изменения в файл 'app/Services/ReportParserService.php', увеличив время кэширования до 24 часов. Это должно немедленно снизить нагрузку на сервер.\n");
    return 0;
}
